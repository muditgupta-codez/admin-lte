{"ast":null,"code":"import{Route,Routes,Navigate}from\"react-router-dom\";import Layout from\"../layouts/Layout\";import RequireAuth from\"../components/requireAuth\";import path from\"./paths\";import useAuth from\"../hooks/useAuth\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var loadRoutes=function loadRoutes(routes,Layout){var _useAuth=useAuth(),auth=_useAuth.auth,isLoading=_useAuth.isLoading;return routes.map(function(item){var _auth$user,_auth$user2;if(item!==null&&item!==void 0&&item.public)return;if(item!==null&&item!==void 0&&item.roles&&item.roles.includes(auth===null||auth===void 0?void 0:(_auth$user=auth.user)===null||_auth$user===void 0?void 0:_auth$user.role)){return/*#__PURE__*/_jsx(Route,{path:item.path,element:/*#__PURE__*/_jsx(Layout,{children:item.component})},item.path);}else if(!(item!==null&&item!==void 0&&item.roles)||item!==null&&item!==void 0&&item.roles&&item.roles.includes(auth===null||auth===void 0?void 0:(_auth$user2=auth.user)===null||_auth$user2===void 0?void 0:_auth$user2.role)){return/*#__PURE__*/_jsx(Route,{path:item.path,element:/*#__PURE__*/_jsx(Layout,{children:item.component})},item.path);}});};var loadPublic=function loadPublic(routes){return routes.map(function(item){if(item.public){return/*#__PURE__*/_jsx(Route,{path:item.path,element:/*#__PURE__*/_jsx(item.component,{})},item.path);}});};var RoutesComponent=function RoutesComponent(){var _useAuth2=useAuth(),auth=_useAuth2.auth,isLoading=_useAuth2.isLoading;console.log(auth);return/*#__PURE__*/_jsxs(Routes,{children:[loadPublic(path),/*#__PURE__*/_jsx(Route,{element:/*#__PURE__*/_jsx(RequireAuth,{}),children:loadRoutes(path,Layout)}),\" \",/*#__PURE__*/_jsx(Route,{path:\"/*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true})},\"all\")]});};export default RoutesComponent;","map":{"version":3,"names":["Route","Routes","Navigate","Layout","RequireAuth","path","useAuth","loadRoutes","routes","auth","isLoading","map","item","public","roles","includes","user","role","component","loadPublic","RoutesComponent","console","log"],"sources":["W:/Codezesk/aermart/admin-frontend/src/routes/routes.js"],"sourcesContent":["import { Route, Routes, Navigate } from \"react-router-dom\";\r\nimport Layout from \"../layouts/Layout\";\r\nimport RequireAuth from \"../components/requireAuth\";\r\nimport path from \"./paths\";\r\nimport useAuth from \"../hooks/useAuth\";\r\nconst loadRoutes = (routes, Layout) => {\r\n  const { auth, isLoading } = useAuth();\r\n  return routes.map((item) => {\r\n    if (item?.public) return;\r\n    if (item?.roles && item.roles.includes(auth?.user?.role)) {\r\n      return (\r\n        <Route\r\n          key={item.path}\r\n          path={item.path}\r\n          element={<Layout>{item.component}</Layout>}\r\n        />\r\n      );\r\n    } else if (\r\n      !item?.roles ||\r\n      (item?.roles && item.roles.includes(auth?.user?.role))\r\n    ) {\r\n      return (\r\n        <Route\r\n          key={item.path}\r\n          path={item.path}\r\n          element={<Layout>{item.component}</Layout>}\r\n        />\r\n      );\r\n    }\r\n  });\r\n};\r\n\r\nconst loadPublic = (routes) => {\r\n  return routes.map((item) => {\r\n    if (item.public) {\r\n      return (\r\n        <Route key={item.path} path={item.path} element={<item.component />} />\r\n      );\r\n    }\r\n  });\r\n};\r\n\r\nconst RoutesComponent = () => {\r\n  const { auth, isLoading } = useAuth();\r\n  console.log(auth);\r\n  return (\r\n    <Routes>\r\n      {loadPublic(path)}\r\n      <Route element={<RequireAuth />}>{loadRoutes(path, Layout)}</Route>{\" \"}\r\n      {/* {!isLoading && ( */}\r\n      <Route key={\"all\"} path={\"/*\"} element={<Navigate to={\"/\"} replace />} />\r\n      {/* )} */}\r\n    </Routes>\r\n  );\r\n};\r\nexport default RoutesComponent;\r\n"],"mappings":"AAAA,OAASA,KAAK,CAAEC,MAAM,CAAEC,QAAQ,KAAQ,kBAAkB,CAC1D,MAAOC,OAAM,KAAM,mBAAmB,CACtC,MAAOC,YAAW,KAAM,2BAA2B,CACnD,MAAOC,KAAI,KAAM,SAAS,CAC1B,MAAOC,QAAO,KAAM,kBAAkB,CAAC,wFACvC,GAAMC,WAAU,CAAG,QAAbA,WAAU,CAAIC,MAAM,CAAEL,MAAM,CAAK,CACrC,aAA4BG,OAAO,EAAE,CAA7BG,IAAI,UAAJA,IAAI,CAAEC,SAAS,UAATA,SAAS,CACvB,MAAOF,OAAM,CAACG,GAAG,CAAC,SAACC,IAAI,CAAK,4BAC1B,GAAIA,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAEC,MAAM,CAAE,OAClB,GAAID,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAEE,KAAK,EAAIF,IAAI,CAACE,KAAK,CAACC,QAAQ,CAACN,IAAI,SAAJA,IAAI,6BAAJA,IAAI,CAAEO,IAAI,qCAAV,WAAYC,IAAI,CAAC,CAAE,CACxD,mBACE,KAAC,KAAK,EAEJ,IAAI,CAAEL,IAAI,CAACP,IAAK,CAChB,OAAO,cAAE,KAAC,MAAM,WAAEO,IAAI,CAACM,SAAS,EAAW,EAFtCN,IAAI,CAACP,IAAI,CAGd,CAEN,CAAC,IAAM,IACL,EAACO,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAEE,KAAK,GACXF,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAEE,KAAK,EAAIF,IAAI,CAACE,KAAK,CAACC,QAAQ,CAACN,IAAI,SAAJA,IAAI,8BAAJA,IAAI,CAAEO,IAAI,sCAAV,YAAYC,IAAI,CAAE,CACtD,CACA,mBACE,KAAC,KAAK,EAEJ,IAAI,CAAEL,IAAI,CAACP,IAAK,CAChB,OAAO,cAAE,KAAC,MAAM,WAAEO,IAAI,CAACM,SAAS,EAAW,EAFtCN,IAAI,CAACP,IAAI,CAGd,CAEN,CACF,CAAC,CAAC,CACJ,CAAC,CAED,GAAMc,WAAU,CAAG,QAAbA,WAAU,CAAIX,MAAM,CAAK,CAC7B,MAAOA,OAAM,CAACG,GAAG,CAAC,SAACC,IAAI,CAAK,CAC1B,GAAIA,IAAI,CAACC,MAAM,CAAE,CACf,mBACE,KAAC,KAAK,EAAiB,IAAI,CAAED,IAAI,CAACP,IAAK,CAAC,OAAO,cAAE,KAAC,IAAI,CAAC,SAAS,IAAI,EAAxDO,IAAI,CAACP,IAAI,CAAkD,CAE3E,CACF,CAAC,CAAC,CACJ,CAAC,CAED,GAAMe,gBAAe,CAAG,QAAlBA,gBAAe,EAAS,CAC5B,cAA4Bd,OAAO,EAAE,CAA7BG,IAAI,WAAJA,IAAI,CAAEC,SAAS,WAATA,SAAS,CACvBW,OAAO,CAACC,GAAG,CAACb,IAAI,CAAC,CACjB,mBACE,MAAC,MAAM,YACJU,UAAU,CAACd,IAAI,CAAC,cACjB,KAAC,KAAK,EAAC,OAAO,cAAE,KAAC,WAAW,IAAI,UAAEE,UAAU,CAACF,IAAI,CAAEF,MAAM,CAAC,EAAS,CAAC,GAAG,cAEvE,KAAC,KAAK,EAAa,IAAI,CAAE,IAAK,CAAC,OAAO,cAAE,KAAC,QAAQ,EAAC,EAAE,CAAE,GAAI,CAAC,OAAO,OAAI,EAA1D,KAAK,CAAwD,GAElE,CAEb,CAAC,CACD,cAAeiB,gBAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}